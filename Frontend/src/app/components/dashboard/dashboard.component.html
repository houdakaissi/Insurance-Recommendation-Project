<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>

<div id="l">Assurances:</div>
{{message}}


<div class="contain">
  <div class="search input-group mb-3">
    <input type="text" maxlength="20"  class="form-control"style="width:200px;" placeholder="Search" [(ngModel)]="term">
  </div>

  <button class="btn btn-primary me-2" (click)="sortBy('cost')">Sort by Cost</button>
  <button class="btn btn-primary" (click)="sortBy('date')">Sort by Date</button>
</div>
  
 
  
<div class="search">

<div class="contract-cards">
  <div *ngFor="let element of myContratDetails | filter:term" class="contract-card">
    <div class="details-label">Cost:</div>
    <div class="details-value">{{ element.cost }}</div>
    
    <div class="details-label">Description:</div>
    <div class="details-value">{{ element.desc }}</div>
    
    <div class="details-label">Date:</div>
    <div class="details-value">{{ element.date }}</div>

    <button (click)="toggleMoreDetails(element)">>>>>More Details</button>
    <button (click)="selectAssurance(element)" class="get" style="background-color:gray;">Get the insurance </button>

    <!-- Display cost only when the showDetails property is true -->
    <div *ngIf="element.showDetails" class="details-label">
        
      <div class="details-label">
        <ng-container *ngIf="element.hasCar">
          <div class="details-label">Type:car</div>
          <div class="details-value">age:{{ element.age }}</div>
          <div class="details-value">mileage:{{ element.mileage }}</div>
        </ng-container>
        
        <ng-container *ngIf="element.hasStage">
          <div class="details-label">Type:stage:</div>
          <div class="details-value">duration:{{ element.duration }}</div>
          <div class="details-value">start Franchise{{ element.startFranchise }}</div>
          <div class="details-value">end franchise :{{ element.endFranchise }}</div>
        </ng-container>
        
        <ng-container *ngIf="element.hasTravel">
          <div class="details-label">Type:travel:</div>
          <div class="details-value">duration:{{ element.duration }}</div>
          <div class="details-value">start Franchise: {{ element.startFranchise }}</div>
          <div class="details-value">end Franchise{{ element.endFranchise }}</div>
          <div class="details-value">destination: {{ element.destination }}</div>
        </ng-container>
        

    <div class="details-label">seller infos:</div>
    <div class="details-value">{{ element.seller.username }}</div>
    <div class="details-value">{{ element.seller.prenom }}</div>
    <div class="details-value">{{ element.seller.tel }}</div>


      <button (click)="addToCart(element)">ADD TO CARD</button>
      </div>
<!-- ... your existing HTML code for contracts -->

<button (click)="addToCart(element)">ADD TO CART</button>

<!-- ... your existing HTML code for contracts -->

<!-- Display the cart -->
<div *ngIf="showCart" class="cart-section">
<div class="cart-section">
  <h2>Shopping Cart</h2>

  <div *ngIf="cart.length > 0; else emptyCart">
    <div *ngFor="let cartItem of cart" class="cart-item">
      <div class="details-label">Cost:</div>
      <div class="details-value">{{ cartItem.cost }}</div>

      <div class="details-label">Description:</div>
      <div class="details-value">{{ cartItem.desc }}</div>

      <div class="details-label">Date:</div>
      <div class="details-value">{{ cartItem.date }}</div>
    </div>

    <p>Items have been added to the cart!</p>
  </div>

  <ng-template #emptyCart>
    <p>Your cart is empty.</p>
  </ng-template>
</div>

  </div>
</div>

<!-- ... your existing HTML code for contracts -->

<!-- Display the cart -->
<div *ngIf="showCart" class="cart-section">
<div class="cart-section">
  <h2>Shopping Cart</h2>

  <div *ngIf="cart.length > 0; else emptyCart">
    <div *ngFor="let cartItem of cart" class="cart-item">
      <div class="details-label">Cost:</div>
      <div class="details-value">{{ cartItem.cost }}</div>

      <div class="details-label">Description:</div>
      <div class="details-value">{{ cartItem.desc }}</div>

      <div class="details-label">Date:</div>
      <div class="details-value">{{ cartItem.date }}</div>
    </div>

    <p>Items have been added to the cart!</p>
  </div>
 
  <ng-template #emptyCart>
    <p>Your cart is empty.</p>
  </ng-template>
 
</div>

  </div>
 
</div>
<div is="1">
<button class="h" (click)="toggleCart()">Show Contracts in Cart</button>
</div>